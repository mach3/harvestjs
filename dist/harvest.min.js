/*!
 * HarvestJS
 * ---------
 * Simple script loader
 * 
 * @version 0.9.0
 * @author mach3 <http://github.com/mach3>
 * @url http://github.com/mach3/harvestjs
 * @license MIT License
 */
 !function(a,b){var c=a._harvest={};c.el=null,c.path=null,c.asset=null,c.initialize=function(){var a,b,c,d;a=this,b=this.el=this._last("script"),c=this._data(b,"path"),"string"!=typeof c&&(c=b.src.replace(/(\?|#).+?$|[^\/]+?$/g,"")),this.path=c,d={init:[],main:[]},this._each(d,function(c,d){var e=a._data(b,d);e&&a._each(e.split(/\s|,/),function(a){a&&c.push(a)})}),this.asset=d,d.init.length&&this.load(d.init),d.main.length&&this._onReady(function(){a.load(d.main)})},c.load=function(a){(new this.Harvest).load(a)},c._last=function(a){var b=document.getElementsByTagName(a);return b[b.length-1]},c._data=function(a,b){return a.getAttribute("data-"+b)},c._each=function(a,b){var c;for(c in a)if(a.hasOwnProperty(c)&&!1===b(a[c],c,a))break},c._bind=function(a,b){return Function.prototype.bind?a.bind(b):function(){a.apply(b,arguments)}},c._onReady=function(c){var d=function(){c._done||/^(interactive|complete)$/.test(b.readyState)&&(c._done=!0,c())};this._on(b,"DOMContentLoaded",d),this._on(b,"readystatechange",d),this._on(a,"load",d),d()},c._on=function(a,b,c){return a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent?a.attachEvent("on"+b,c):void 0},c.Harvest=function(){this.path=c.path},function(){this.head=c._last("head"),this.path="",this.count=0,this.callback=null,this.load=function(a){var b,c;for(this.count=c=a.length,b=0;c>b;b++)this.appendScript(this.path+a[b])},this.appendScript=function(a){var d=b.createElement("script");d.setAttribute("type","text/javascript"),d.setAttribute("src",a),d.async=!1,c._on(d,"load",c._bind(this._process,this)),c._on(d,"readystatechange",c._bind(this._process,this)),this.head.appendChild(d)},this._process=function(a){var b=a.srcElement;b._loaded||("load"===a.type||/^(complete|loaded)$/.test(b.readyState))&&(b._loaded=!0,--this.count||"function"!=typeof this.callback||this.callback())}}.call(c.Harvest.prototype),a.harvest=function(){var a,b;a=[].slice.call(arguments),b=new c.Harvest,"function"==typeof a[a.length-1]&&(b.callback=a.pop()),b.load(a)},c.initialize()}(window,document);